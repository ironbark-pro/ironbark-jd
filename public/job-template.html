<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="pageTitle">Job Details | Ironbark Executive Search</title>
    <link rel="stylesheet" href="/assets/css/main.css">
    <style>
        .job-detail-container {
            max-width: 900px;
            margin: 80px auto;
            padding: 40px 20px;
        }
        .job-header {
            margin-bottom: 40px;
        }
        .job-title {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #1a1a1a;
        }
        .job-meta {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            color: #666;
            font-size: 1rem;
        }
        .job-content {
            line-height: 1.8;
            margin-bottom: 60px;
        }
        .job-content h2 {
            font-size: 1.8rem;
            margin: 30px 0 15px;
            color: #1a1a1a;
        }
        .job-content ul {
            margin: 15px 0;
            padding-left: 25px;
        }
        .job-content li {
            margin: 8px 0;
        }
        .application-section {
            background: #f8f9fa;
            padding: 40px;
            border-radius: 8px;
            margin-top: 60px;
        }
        .application-section h2 {
            font-size: 2rem;
            margin-bottom: 30px;
            text-align: center;
        }
        .application-form {
            max-width: 600px;
            margin: 0 auto;
        }
        .form-group {
            margin-bottom: 25px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            font-family: inherit;
        }
        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }
        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #0066cc;
        }
        .submit-btn {
            background: #0066cc;
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 4px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: background 0.3s ease;
        }
        .submit-btn:hover {
            background: #0052a3;
        }
        .optional {
            color: #999;
            font-weight: normal;
            font-size: 0.9rem;
        }
        .success-message {
            display: none;
            background: #d4edda;
            color: #155724;
            padding: 20px;
            border-radius: 4px;
            margin-top: 20px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="job-detail-container">
        <div class="job-header">
            <h1 class="job-title" id="jobTitle">Loading...</h1>
            <div class="job-meta" id="jobMeta"></div>
        </div>
        
        <div class="job-content" id="jobContent">
            <!-- Job description will be loaded here -->
        </div>

        <div class="application-section">
            <h2>Apply for this Position</h2>
            <form class="application-form" name="job-application" method="POST" data-netlify="true" enctype="multipart/form-data">
                <input type="hidden" name="form-name" value="job-application">
                <input type="hidden" name="job-title" id="formJobTitle">
                
                <div class="form-group">
                    <label for="name">Full Name *</label>
                    <input type="text" id="name" name="name" required>
                </div>

                <div class="form-group">
                    <label for="email">Email Address *</label>
                    <input type="email" id="email" name="email" required>
                </div>

                <div class="form-group">
                    <label for="linkedin">LinkedIn Profile <span class="optional">(optional)</span></label>
                    <input type="url" id="linkedin" name="linkedin" placeholder="https://linkedin.com/in/yourprofile">
                </div>

                <div class="form-group">
                    <label for="resume">Resume/CV *</label>
                    <input type="file" id="resume" name="resume" accept=".pdf,.doc,.docx" required>
                </div>

                <div class="form-group">
                    <label for="cover-letter">Cover Letter <span class="optional">(optional)</span></label>
                    <textarea id="cover-letter" name="cover-letter" placeholder="Tell us why you're interested in this position..."></textarea>
                </div>

                <button type="submit" class="submit-btn">Submit Application</button>
                
                <div class="success-message" id="successMessage">
                    ‚úÖ Thank you! Your application has been submitted successfully.
                </div>
            </form>
        </div>
    </div>

    <script>
        // Get job slug from URL
        const pathParts = window.location.pathname.split('/');
        const jobSlug = pathParts[pathParts.length - 1];

        // Job data (in production, this would fetch from markdown files)
        const jobsData = {
            'senior-manager-engineering': {
                title: 'Senior Manager, Engineering',
                location: 'San Francisco, CA',
                type: 'Full-time',
                salary: '$180,000 - $220,000',
                content: `
                    <h2>About the Role</h2>
                    <p>We are seeking an experienced Senior Manager of Engineering to lead our growing team...</p>
                    
                    <h2>Responsibilities</h2>
                    <ul>
                        <li>Lead and mentor a team of 8-12 engineers</li>
                        <li>Drive technical strategy and architecture decisions</li>
                        <li>Collaborate with product and design teams</li>
                        <li>Establish engineering best practices and processes</li>
                    </ul>
                    
                    <h2>Requirements</h2>
                    <ul>
                        <li>8+ years of software engineering experience</li>
                        <li>3+ years in engineering management</li>
                        <li>Strong technical background in modern web technologies</li>
                        <li>Excellent communication and leadership skills</li>
                    </ul>
                `
            }
        };

        // Load job data
        const jobData = jobsData[jobSlug];
        if (jobData) {
            document.getElementById('pageTitle').textContent = `${jobData.title} | Ironbark`;
            document.getElementById('jobTitle').textContent = jobData.title;
            document.getElementById('jobMeta').innerHTML = `
                <span>üìç ${jobData.location}</span>
                <span>üíº ${jobData.type}</span>
                <span>üíµ ${jobData.salary}</span>
            `;
            document.getElementById('jobContent').innerHTML = jobData.content;
            document.getElementById('formJobTitle').value = jobData.title;
        } else {
            document.getElementById('jobTitle').textContent = 'Job Not Found';
            document.getElementById('jobContent').innerHTML = '<p>Sorry, this job listing could not be found.</p>';
        }

        // Form submission
        const form = document.querySelector('.application-form');
        form.addEventListener('submit', (e) => {
            // Netlify will handle the form submission
            setTimeout(() => {
                document.getElementById('successMessage').style.display = 'block';
                form.reset();
            }, 100);
        });
    </script>
</body>
</html>
